# Ochsner Sport Club backend

To run backend you'll need:

 1. node.js
 2. mongodb
 3. imagemagick
 4. and sails.js


Run the npm install command and all Sails missing modules will be installed
```sh
$ sudo npm install
```
You can check all modules in package.json file.


## RESTful calls

Blah some random text about rest...

### - GET REQUESTS
Use get requests when you want to get data from database ;)

#### GET teasers, offers and competitions
To get all **teasers**, **offers**, **competitions** or **onboarding**, just send get request to:
```
http://ServerURL/api/{type}
```
\*type = "teasers", "offers", "competitions", "onboarding"

To get teasers for only iPhone 5 or for only iPhone 6 Plus:
```
http://ServerURL/api/teasers?device=iPhone5
http://ServerURL/api/teasers?device=iPhone6plus
```
To get offers by language _(de,fr,it)_ use:
```
http://ServerURL/api/offers?language=de
```
You can combine parameters...
```
http://ServerURL/api/competitions?device=iPhone6&language=de
```

#### GET terms
To get terms similar approach is needed... There is no need for device parameter.
```
http://ServerURL/api/terms?language=de
```

### - POST REQUESTS
Use POST requests when you want to create, update or delete data from database ;)

When using POST requests you'll need to authenticate with **csfr** token:

#### **CSFR token**
POST calls must be authenticated with **csfr** token. So before calling any POST calls you must GET **csfr** token for that session from:
```
http://ServerURL/csrfToken
```
When you aquire **csfr** token send it inside **X-CSRF-Token** header with other POST data.
___
#### New club memeber
Make POST request to:
```
http://ServerURL/api/cards
```
Parameters: <p style="color:red">**README IN DEVELOPMENT...**</p>

| Param         | Required      | Unique*      | Description                       |
| ------------- |:-------------:| ------------:| ---------------------------------:|
| ??w8in data   | ??w8in data   | ??w8in data  |                                   |
| ??w8in data   | ??w8in data   | ??w8in data  |                                   |
| csrf          | true          | false        | This is fake csrf for bad people.*|

<dl>
<dt><strong>*unique</strong></dt>
<dd>Its unique in database and request will respond with error that value exists.</dd>
<dt><strong>*fake csrf</strong></dt>
<dd>Fake csfr is our additional control if the user is really requesting POST from inside the mobile app. It is generated by adding sufix <strong>MIDGET</strong> and prefix <strong>NINJA</strong> to <strong>email</strong> parameter and then SHA1 hashing everything from inside mobile app.</dd>
</dl>

##INSERT MORE INFO LATER :)